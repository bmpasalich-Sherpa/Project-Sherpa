<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="theme-color" content="#FAF9F7">
  <title>Financial Agency</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600&family=Source+Serif+4:wght@400;500&display=swap" rel="stylesheet">
  
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }
    
    html, body {
      height: 100%;
      overflow: hidden;
    }
    
    body {
      font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #FAF9F7;
      color: #2D3436;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    #root {
      height: 100%;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    ::selection {
      background: #E8F0E6;
      color: #2D3436;
    }
    
    textarea::placeholder {
      color: #B2BEC3;
    }
    
    /* Prevent iOS zoom on input focus */
    input, textarea {
      font-size: 16px !important;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <script type="text/babel">
    const { useState, useEffect } = React;

    // Soft, calming color palette
    const theme = {
      bg: '#FAF9F7',
      bgCard: '#FFFFFF',
      textPrimary: '#2D3436',
      textSecondary: '#636E72',
      textMuted: '#B2BEC3',
      accent: '#4A6741',
      accentLight: '#E8F0E6',
      accentHover: '#3D5636',
      border: '#E8E6E3',
      shadow: '0 2px 20px rgba(0,0,0,0.06)',
    };

    // Gentle fade-in animation
    const FadeIn = ({ children, delay = 0 }) => {
      const [visible, setVisible] = useState(false);
      useEffect(() => {
        const timer = setTimeout(() => setVisible(true), delay);
        return () => clearTimeout(timer);
      }, [delay]);
      
      return (
        <div style={{
          opacity: visible ? 1 : 0,
          transform: visible ? 'translateY(0)' : 'translateY(12px)',
          transition: 'opacity 0.5s ease, transform 0.5s ease',
        }}>
          {children}
        </div>
      );
    };

    // Choice button component
    const ChoiceButton = ({ children, onClick, selected, subtle }) => {
      const [hover, setHover] = useState(false);
      
      return (
        <button
          onClick={onClick}
          onMouseEnter={() => setHover(true)}
          onMouseLeave={() => setHover(false)}
          style={{
            width: '100%',
            padding: subtle ? '14px 18px' : '18px 22px',
            marginBottom: '12px',
            background: selected || hover ? theme.accentLight : theme.bgCard,
            border: `1.5px solid ${selected || hover ? theme.accent : theme.border}`,
            borderRadius: '12px',
            fontSize: subtle ? '15px' : '16px',
            fontFamily: "'Source Serif 4', Georgia, serif",
            color: theme.textPrimary,
            cursor: 'pointer',
            textAlign: 'left',
            transition: 'all 0.2s ease',
            boxShadow: selected ? 'none' : theme.shadow,
            WebkitAppearance: 'none',
          }}
        >
          {children}
        </button>
      );
    };

    // Primary action button
    const PrimaryButton = ({ children, onClick, disabled }) => {
      const [hover, setHover] = useState(false);
      
      return (
        <button
          onClick={onClick}
          disabled={disabled}
          onMouseEnter={() => setHover(true)}
          onMouseLeave={() => setHover(false)}
          style={{
            width: '100%',
            padding: '16px 24px',
            background: disabled ? theme.textMuted : (hover ? theme.accentHover : theme.accent),
            border: 'none',
            borderRadius: '12px',
            fontSize: '16px',
            fontWeight: '500',
            fontFamily: "'DM Sans', sans-serif",
            color: '#FFFFFF',
            cursor: disabled ? 'not-allowed' : 'pointer',
            transition: 'all 0.2s ease',
            marginTop: '8px',
            WebkitAppearance: 'none',
          }}
        >
          {children}
        </button>
      );
    };

    // Secondary/subtle button
    const SecondaryButton = ({ children, onClick }) => (
      <button
        onClick={onClick}
        style={{
          background: 'none',
          border: 'none',
          fontSize: '14px',
          fontFamily: "'DM Sans', sans-serif",
          color: theme.textSecondary,
          cursor: 'pointer',
          padding: '12px',
          textDecoration: 'underline',
          textDecorationColor: theme.border,
          textUnderlineOffset: '3px',
          WebkitAppearance: 'none',
        }}
      >
        {children}
      </button>
    );

    // Text input with gentle styling
    const TextInput = ({ value, onChange, placeholder, onSubmit }) => {
      const [focused, setFocused] = useState(false);
      
      return (
        <div style={{ position: 'relative' }}>
          <textarea
            value={value}
            onChange={(e) => onChange(e.target.value)}
            placeholder={placeholder}
            onFocus={() => setFocused(true)}
            onBlur={() => setFocused(false)}
            style={{
              width: '100%',
              minHeight: '100px',
              padding: '16px',
              background: theme.bgCard,
              border: `1.5px solid ${focused ? theme.accent : theme.border}`,
              borderRadius: '12px',
              fontSize: '16px',
              fontFamily: "'Source Serif 4', Georgia, serif",
              color: theme.textPrimary,
              resize: 'none',
              outline: 'none',
              boxSizing: 'border-box',
              WebkitAppearance: 'none',
            }}
            onKeyDown={(e) => {
              if (e.key === 'Enter' && !e.shiftKey && value.trim()) {
                e.preventDefault();
                onSubmit();
              }
            }}
          />
        </div>
      );
    };

    // Progress indicator
    const ProgressDots = ({ current, total }) => (
      <div style={{ 
        display: 'flex', 
        justifyContent: 'center', 
        gap: '8px',
        marginBottom: '32px',
      }}>
        {Array.from({ length: total }).map((_, i) => (
          <div
            key={i}
            style={{
              width: i === current ? '24px' : '8px',
              height: '8px',
              borderRadius: '4px',
              background: i <= current ? theme.accent : theme.border,
              transition: 'all 0.3s ease',
            }}
          />
        ))}
      </div>
    );

    // Main app container
    const AppContainer = ({ children }) => (
      <div style={{
        minHeight: '100%',
        background: theme.bg,
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        padding: '24px 20px',
        paddingBottom: '48px',
        fontFamily: "'DM Sans', sans-serif",
      }}>
        <div style={{
          width: '100%',
          maxWidth: '420px',
        }}>
          {children}
        </div>
      </div>
    );

    // Sherpa message
    const SherpaSays = ({ children, delay = 0 }) => (
      <FadeIn delay={delay}>
        <div style={{
          marginBottom: '24px',
        }}>
          <div style={{
            fontSize: '18px',
            lineHeight: '1.6',
            color: theme.textPrimary,
            fontFamily: "'Source Serif 4', Georgia, serif",
          }}>
            {children}
          </div>
        </div>
      </FadeIn>
    );

    // Reflection box
    const ReflectionBox = ({ children }) => (
      <div style={{
        background: theme.accentLight,
        borderLeft: `3px solid ${theme.accent}`,
        padding: '16px 20px',
        borderRadius: '0 12px 12px 0',
        marginBottom: '20px',
        fontFamily: "'Source Serif 4', Georgia, serif",
        fontSize: '16px',
        lineHeight: '1.6',
        color: theme.textPrimary,
        fontStyle: 'italic',
      }}>
        {children}
      </div>
    );

    // Celebration animation
    const Celebration = ({ children }) => {
      const [scale, setScale] = useState(0.8);
      useEffect(() => {
        setTimeout(() => setScale(1), 100);
      }, []);
      
      return (
        <div style={{
          textAlign: 'center',
          transform: `scale(${scale})`,
          transition: 'transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)',
        }}>
          {children}
        </div>
      );
    };

    // Check icon SVG
    const CheckIcon = () => (
      <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke={theme.accent} strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
    );

    // Main App
    function App() {
      const [screen, setScreen] = useState('welcome');
      const [branch, setBranch] = useState(null);
      const [openResponse, setOpenResponse] = useState('');
      const [aspiration, setAspiration] = useState(null);
      const [priority, setPriority] = useState(null);
      const [microStepResponse, setMicroStepResponse] = useState(null);

      // Scroll to top on screen change
      useEffect(() => {
        window.scrollTo(0, 0);
        document.getElementById('root').scrollTo(0, 0);
      }, [screen]);

      // Branch data
      const branches = {
        behind: {
          label: "I feel like I'm always behind",
          openQuestion: "What does 'behind' look like for you?",
          escapeOptions: [
            "I'm not saving like I should be",
            "I'm always catching up on bills",
            "Other people my age seem further ahead",
            "I just feel like I can't get ahead"
          ],
          reflection: "You feel like you're running behind — like you should be further along than you are right now. And what you want is to stop feeling like you're always catching up.",
        },
        clarity: {
          label: "I don't know where my money goes",
          openQuestion: "When you look at your account, what surprises you?",
          escapeOptions: [
            "The balance is always lower than I expect",
            "I can't remember what I spent on",
            "Small things add up without me noticing",
            "I'm not sure where to even start looking"
          ],
          reflection: "Money comes in, but you're not sure where it goes — and that's frustrating. You want a clearer picture of what's actually happening.",
        },
        control: {
          label: "I want to feel more in control",
          openQuestion: "What would 'in control' feel like for you?",
          escapeOptions: [
            "Knowing I can handle unexpected expenses",
            "Making decisions without constant stress",
            "Having a plan instead of just reacting",
            "Feeling like my money works for me"
          ],
          reflection: "You want to feel like you're driving, not just reacting to whatever comes up. You want your money working for you, not against you.",
        },
        specific: {
          label: "Something specific is stressing me out",
          openQuestion: "Tell me what's on your mind.",
          escapeOptions: [
            "Debt that feels overwhelming",
            "A big expense coming up",
            "My income is unpredictable",
            "Something else I'd rather not say yet"
          ],
          reflection: "There's something specific weighing on you right now. You want to feel like you have a path through it — not just anxiety about it.",
        },
        uncertain: {
          label: "I'm not sure — I just know something needs to change",
          openQuestion: "What made you open this app today?",
          escapeOptions: [
            "I've been thinking about money more lately",
            "Someone suggested I try this",
            "I'm tired of how things are",
            "I honestly don't know — just a feeling"
          ],
          reflection: "You're not sure exactly what's going on, but something made you feel like now is the time to pay attention. You want to figure out where to start.",
        },
      };

      const aspirations = [
        { id: 'stress', label: "Less stress and worry" },
        { id: 'buffer', label: "More breathing room" },
        { id: 'pride', label: "Feeling proud of myself" },
        { id: 'freedom', label: "Being able to do things I've put off" },
        { id: 'peace', label: "Honestly, I'd just like to stop thinking about it so much" },
      ];

      const getPriorities = () => {
        if (branch === 'clarity') {
          return [
            { id: 'track', label: "See where my money actually goes" },
            { id: 'leaks', label: "Find the leaks" },
            { id: 'explore', label: "Just explore — no pressure" },
          ];
        }
        return [
          { id: 'snapshot', label: "Get a clear picture of where I stand" },
          { id: 'win', label: "Find one small win this week" },
          { id: 'talk', label: "Just talk through what's going on" },
        ];
      };

      const getMicroStep = () => {
        if (priority === 'track' || priority === 'leaks') {
          return "Open your last bank statement and find one purchase that surprised you.";
        }
        if (priority === 'snapshot') {
          return "Take 60 seconds to check your bank balance. Just look — no judgment.";
        }
        if (priority === 'win') {
          return "Move $5 to savings right now. It's not about the amount — it's about the action.";
        }
        return "Tell me one thing you're curious about when it comes to money.";
      };

      const resetDemo = () => {
        setScreen('welcome');
        setBranch(null);
        setOpenResponse('');
        setAspiration(null);
        setPriority(null);
        setMicroStepResponse(null);
      };

      // Render screens
      const renderScreen = () => {
        switch (screen) {
          case 'welcome':
            return (
              <>
                <FadeIn delay={200}>
                  <div style={{ 
                    fontSize: '13px', 
                    color: theme.textMuted, 
                    textTransform: 'uppercase',
                    letterSpacing: '1.5px',
                    marginBottom: '8px',
                  }}>
                    Financial Agency
                  </div>
                </FadeIn>
                
                <FadeIn delay={400}>
                  <h1 style={{ 
                    fontSize: '28px', 
                    fontWeight: '400',
                    fontFamily: "'Source Serif 4', Georgia, serif",
                    color: theme.textPrimary,
                    marginBottom: '32px',
                    lineHeight: '1.3',
                  }}>
                    Before we do anything, I'd like to understand what's going on for you.
                  </h1>
                </FadeIn>
                
                <FadeIn delay={600}>
                  <p style={{ 
                    fontSize: '16px', 
                    color: theme.textSecondary,
                    lineHeight: '1.6',
                    marginBottom: '40px',
                  }}>
                    No judgment. No sales pitch. Just a conversation about where you are and where you want to be.
                  </p>
                </FadeIn>
                
                <FadeIn delay={800}>
                  <PrimaryButton onClick={() => setScreen('choice')}>
                    Let's start
                  </PrimaryButton>
                </FadeIn>
              </>
            );

          case 'choice':
            return (
              <>
                <ProgressDots current={0} total={6} />
                <SherpaSays>
                  Which of these feels closest to where you are right now?
                </SherpaSays>
                
                <FadeIn delay={200}>
                  {Object.entries(branches).map(([key, data], i) => (
                    <FadeIn key={key} delay={300 + i * 100}>
                      <ChoiceButton
                        selected={branch === key}
                        onClick={() => {
                          setBranch(key);
                          setTimeout(() => setScreen('open'), 300);
                        }}
                      >
                        {data.label}
                      </ChoiceButton>
                    </FadeIn>
                  ))}
                </FadeIn>
              </>
            );

          case 'open':
            return (
              <>
                <ProgressDots current={1} total={6} />
                <SherpaSays>
                  {branches[branch].openQuestion}
                </SherpaSays>
                
                <FadeIn delay={200}>
                  <TextInput
                    value={openResponse}
                    onChange={setOpenResponse}
                    placeholder="Type here, or tap an option below..."
                    onSubmit={() => setScreen('reflection')}
                  />
                  
                  <div style={{ 
                    textAlign: 'center', 
                    margin: '16px 0',
                    color: theme.textMuted,
                    fontSize: '14px',
                  }}>
                    or choose one:
                  </div>
                  
                  {branches[branch].escapeOptions.map((option, i) => (
                    <ChoiceButton
                      key={i}
                      subtle
                      onClick={() => {
                        setOpenResponse(option);
                        setTimeout(() => setScreen('reflection'), 300);
                      }}
                    >
                      {option}
                    </ChoiceButton>
                  ))}
                </FadeIn>
                
                {openResponse && (
                  <FadeIn delay={0}>
                    <PrimaryButton onClick={() => setScreen('reflection')}>
                      Continue
                    </PrimaryButton>
                  </FadeIn>
                )}
              </>
            );

          case 'reflection':
            return (
              <>
                <ProgressDots current={2} total={6} />
                <SherpaSays>
                  Let me make sure I understand.
                </SherpaSays>
                
                <FadeIn delay={300}>
                  <ReflectionBox>
                    {branches[branch].reflection}
                  </ReflectionBox>
                </FadeIn>
                
                <FadeIn delay={500}>
                  <SherpaSays delay={0}>
                    Did I get that right?
                  </SherpaSays>
                </FadeIn>
                
                <FadeIn delay={700}>
                  <div style={{ display: 'flex', gap: '12px' }}>
                    <div style={{ flex: 1 }}>
                      <PrimaryButton onClick={() => setScreen('aspiration')}>
                        Yes, that's right
                      </PrimaryButton>
                    </div>
                  </div>
                  <div style={{ textAlign: 'center', marginTop: '8px' }}>
                    <SecondaryButton onClick={() => setScreen('open')}>
                      Not quite — let me clarify
                    </SecondaryButton>
                  </div>
                </FadeIn>
              </>
            );

          case 'aspiration':
            return (
              <>
                <ProgressDots current={3} total={6} />
                <SherpaSays>
                  If things were better with money, what would feel different for you?
                </SherpaSays>
                
                <FadeIn delay={200}>
                  {aspirations.map((asp, i) => (
                    <FadeIn key={asp.id} delay={300 + i * 100}>
                      <ChoiceButton
                        selected={aspiration === asp.id}
                        onClick={() => {
                          setAspiration(asp.id);
                          setTimeout(() => setScreen('priority'), 300);
                        }}
                      >
                        {asp.label}
                      </ChoiceButton>
                    </FadeIn>
                  ))}
                </FadeIn>
              </>
            );

          case 'priority':
            return (
              <>
                <ProgressDots current={4} total={6} />
                <SherpaSays>
                  Based on what you've shared, here are a few places we could start. What feels most important to you right now?
                </SherpaSays>
                
                <FadeIn delay={200}>
                  {getPriorities().map((p, i) => (
                    <FadeIn key={p.id} delay={300 + i * 100}>
                      <ChoiceButton
                        selected={priority === p.id}
                        onClick={() => {
                          setPriority(p.id);
                          setTimeout(() => setScreen('microstep'), 300);
                        }}
                      >
                        {p.label}
                      </ChoiceButton>
                    </FadeIn>
                  ))}
                </FadeIn>
              </>
            );

          case 'microstep':
            return (
              <>
                <ProgressDots current={5} total={6} />
                <SherpaSays>
                  Here's one small thing that might help with that:
                </SherpaSays>
                
                <FadeIn delay={300}>
                  <ReflectionBox>
                    {getMicroStep()}
                  </ReflectionBox>
                </FadeIn>
                
                <FadeIn delay={500}>
                  <SherpaSays delay={0}>
                    How does that sound?
                  </SherpaSays>
                </FadeIn>
                
                <FadeIn delay={700}>
                  <ChoiceButton
                    onClick={() => {
                      setMicroStepResponse('yes');
                      setTimeout(() => setScreen('celebration'), 300);
                    }}
                  >
                    Let's do it
                  </ChoiceButton>
                  <ChoiceButton
                    onClick={() => {
                      setMicroStepResponse('more');
                      setTimeout(() => setScreen('celebration'), 300);
                    }}
                  >
                    Tell me more
                  </ChoiceButton>
                  <ChoiceButton
                    onClick={() => {
                      setMicroStepResponse('later');
                      setTimeout(() => setScreen('later'), 300);
                    }}
                  >
                    Maybe later
                  </ChoiceButton>
                </FadeIn>
              </>
            );

          case 'later':
            return (
              <>
                <SherpaSays>
                  No pressure at all.
                </SherpaSays>
                
                <FadeIn delay={300}>
                  <p style={{ 
                    fontSize: '16px', 
                    color: theme.textSecondary,
                    lineHeight: '1.7',
                    marginBottom: '24px',
                  }}>
                    You've already done something important today — you showed up and told me what's going on. That's the first step.
                  </p>
                </FadeIn>
                
                <FadeIn delay={500}>
                  <p style={{ 
                    fontSize: '16px', 
                    color: theme.textSecondary,
                    lineHeight: '1.7',
                    marginBottom: '32px',
                  }}>
                    I'll be here when you're ready.
                  </p>
                </FadeIn>
                
                <FadeIn delay={700}>
                  <ChoiceButton onClick={() => setScreen('celebration')}>
                    Set a reminder for tomorrow
                  </ChoiceButton>
                  <SecondaryButton onClick={resetDemo}>
                    Close for now
                  </SecondaryButton>
                </FadeIn>
              </>
            );

          case 'celebration':
            return (
              <>
                <Celebration>
                  <FadeIn delay={200}>
                    <div style={{
                      width: '80px',
                      height: '80px',
                      background: theme.accentLight,
                      borderRadius: '50%',
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'center',
                      margin: '0 auto 24px',
                    }}>
                      <CheckIcon />
                    </div>
                  </FadeIn>
                  
                  <FadeIn delay={400}>
                    <h2 style={{
                      fontSize: '24px',
                      fontFamily: "'Source Serif 4', Georgia, serif",
                      fontWeight: '400',
                      color: theme.textPrimary,
                      marginBottom: '16px',
                    }}>
                      You did it.
                    </h2>
                  </FadeIn>
                  
                  <FadeIn delay={600}>
                    <p style={{
                      fontSize: '16px',
                      color: theme.textSecondary,
                      lineHeight: '1.7',
                      marginBottom: '32px',
                    }}>
                      That might seem small, but most people never get this far. You just took your first step.
                    </p>
                  </FadeIn>
                  
                  <FadeIn delay={800}>
                    <ChoiceButton onClick={() => {
                      alert("In the full app, this continues to your next session!");
                    }}>
                      Keep going
                    </ChoiceButton>
                    <ChoiceButton onClick={resetDemo}>
                      I'm good for today
                    </ChoiceButton>
                  </FadeIn>
                </Celebration>
                
                <FadeIn delay={1000}>
                  <p style={{
                    fontSize: '13px',
                    color: theme.textMuted,
                    textAlign: 'center',
                    marginTop: '40px',
                  }}>
                    — End of First Session Demo —
                  </p>
                  <div style={{ textAlign: 'center', marginTop: '8px' }}>
                    <SecondaryButton onClick={resetDemo}>
                      Restart demo
                    </SecondaryButton>
                  </div>
                </FadeIn>
              </>
            );

          default:
            return null;
        }
      };

      return (
        <AppContainer>
          {renderScreen()}
        </AppContainer>
      );
    }

    // Render the app
    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
